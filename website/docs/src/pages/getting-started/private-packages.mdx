# Private packages

With Sandpack, you can securely consume private NPM registries (GitHub packages, NPM private registry, custom registries, etc.) within just a few steps. CodeSandbox internal proxy provides the interface to communicate with a custom private NPM registry and retrieve NPM packages from any NPM registry. 

This feature is available for all Team Pro accounts, and you can access the settings [here](https://codesandbox.io/dashboard/settings/npm-registry).

## Get started

1. Configure your NPM settings on the [CodeSandbox dashboard](https://codesandbox.io/docs/learn/sandboxes/custom-npm-registry);
2. Provide for your Sandpack sandboxes a team id* and your custom setup;
3. Set a list of trusted domains, on [Dashboard](https://codesandbox.io/dashboard/)**;
4. When Sandpack loads, you will be asked to sign in and then done;

<small>* You can find you team id on the dashboard URL at [codesandbox.io/dashboard](https://codesandbox.io/dashboard/)</small>
<br/>
<small>** This will ensure that no one but you can use and render these sandboxes</small>

<br/><br/>

```jsx
<Sandpack
  template="react"

  // This is an identifier for your sandboxes and private NPM registry
  teamId="59dc0ba8-67d8-4eb3-8fbe-44e5b72a955e"

  // Set the dependencies, for example, this is a private package from GitHub packages
  customSetup={{
    dependencies: { "@codesandbox/test-package": "latest" },
  }}

  // Consume dependencies as usual
  files={{
    "App.js": `import { Button } from "@codesandbox/test-package";

export default function App() {
return <Button>Hello World</Button>
}`,
  }}
/>

```

### Examples (screenshots)

**Sandpack sign-in**

<img src="/docs/private-package-signin.png" />

**Sandpack loaded**

<img src="/docs/private-package-loaded.png" />

**Sandpack sign-out**

<img style={{width: "400px"}} src="/docs/private-package-signout.png" />

## Security

It's important to us to keep the information and tokens of the NPM registry private, because of this we've added some extra measures to ensure that nothing can leak.

### Persisting auth token

The auth token is stored in our database in an encrypted form, using a key that's rolled and not available to the database itself. Even if our database would be compromised, your auth token would be encrypted and inaccessible.

### Single-Sandbox key

We never send the auth token to the browser. Instead, we give every editor of the sandbox a key that only gives them access to that specific sandbox. If they want to retrieve a package from the private npm registry, they will have to ask our API. The API will fetch the auth token, request the NPM registry on behalf of the user and return the response to the user.

### Trusted-domain only

Sandpack uses the HTTP Content-Security-Policy (CSP) frame-ancestors directive to validate parents' window that may embed the given sandpack-iframe. With this extra security layer, only websites you trust and provide to us, can render and fetch private packages from your registry. This can avoid phishing websites and potential private leak data.

